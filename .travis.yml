language: python
python:
  - "2.7"
# command to install dependencies
sudo: required

services:
  - docker

install:
  - pip install -r requirements.txt
# command to run tests

script:
  - docker build -t friendlyhello .
  - docker images
  - docker run -d -p 4000:80 friendlyhello
  - ./init.sh
  - py.test # or py.test for Python versions 3.5 and below
  - docker ps
  - docker ps -a
  - docker ps | grep -q friendlyhello
  - docker inspect --format '{{ .NetworkSettings.IPAddress }}' friendlyhello
  - curl http://localhost:4000
  - curl http://localhost:80
